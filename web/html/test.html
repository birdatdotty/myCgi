<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <title>Тег FORM, атрибут method</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/header.js" charset="utf-8"></script>
  </head>
  <body>
    <h1>Добро пожаловать на мой сайт</h1>
    <h2>извиняюсь за столь безобразное оформление, я занимался разработкой сервера, который отдает данную страницу</h2>
    <div id="menu">
      Obj.script(/menu.qj)
    </div>
     <h1>Obj.chunk(/chunk1.chunk)</h1>
     ---- page: Obj.url() ----<br/>
     ---- router: Obj.router(sss fdf) ----
    <form action="Obj.url()" method="post" onsubmit="send(this);return false">
      <p><label for="">str1:</label><input type="text" name="str1">
      <p><label for="">str2:</label><input type="text" name="str2">
      <p><label for="">str3:</label><input type="text" name="str3">
      <p><input type="submit" value="Отправить"></p>
    </form>

    <main>
    	Obj.file(/etc/fstab)
    </main>
    <script>
      function send(f) {
        // f - form
        let form = new FormData(f)
        form.append("id","123");
        var xhr = new XMLHttpRequest();//new URL(document.URL).pathname

        xhr.open('POST', "/post" + new URL(f.action).pathname);
        xhr.response = "json";
        xhr.onload = function() {
          console.log( this.responseText );
        }

        f.reset();
        xhr.send(form);
      }
    </script>
  </body>
</html>
